@page
@model IEnumerable<Troja.Models.User>
@{
    ViewData["Title"] = "Users List";
}

<h1>@ViewData["Title"]</h1>

<p>
    <a asp-controller="Users" asp-action="Create" class="btn btn-primary">Create New</a>
</p>

<style>
    .table-wrapper {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    table {
        width: 100%;
        table-layout: auto;
    }
    @media (max-width: 768px) {
        .table thead {
            display: none;
        }
        .table, .table tbody, .table tr, .table td {
            display: block;
            width: 100%;
        }
        .table td {
            position: relative;
            padding-left: 50%;
            text-align: right;
        }
        .table td::before {
            content: attr(data-label);
            position: absolute;
            left: 0;
            width: 45%;
            padding-left: 10px;
            font-weight: bold;
            white-space: nowrap;
        }
    }
</style>

<div class="table-wrapper">
    <table class="table">
        <thead>
            <tr>
                <th>Identification Type</th>
                <th>Identification Number</th>
                <th>Name</th>
                <th>Last Name</th>
                <th>Gender</th>
                <th>Birth Date</th>
                <th>Address</th>
                <th>Phone Number</th>
                <th>Role</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @if (!Model.Any())
            {
                <tr>
                    <td colspan="10">No users found.</td>
                </tr>
            }
            else
            {
                @foreach (var user in Model) {
                    <tr>
                        <td>@Html.DisplayFor(modelItem => user.IdentificationType)</td>
                        <td>@Html.DisplayFor(modelItem => user.IdentificationNumber)</td>
                        <td>@Html.DisplayFor(modelItem => user.Name)</td>
                        <td>@Html.DisplayFor(modelItem => user.LastName)</td>
                        <td>@Html.DisplayFor(modelItem => user.Gender)</td>
                        <td>@Html.DisplayFor(modelItem => user.BirthDate)</td>
                        <td>@Html.DisplayFor(modelItem => user.Address)</td>
                        <td>@Html.DisplayFor(modelItem => user.PhoneNumber)</td>
                        <td>
                            @if (user.Role == 0)
                            {
                                <span>User</span>
                            }
                            else if (user.Role == 1)
                            {
                                <span>Administrator</span>
                            }
                        </td>
                        <td>
                            <a asp-action="Edit" asp-route-id="@user.UserId">Edit</a> |
                            <a asp-action="Details" asp-route-id="@user.UserId">Details</a> |
                            <a asp-action="Delete" asp-route-id="@user.UserId">Delete</a>
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>
